{"cells":[{"metadata":{"_uuid":"6d3fc5b7135a2bb736afb894333f771c768f3ea9"},"cell_type":"markdown","source":"## Summary\n* SVM C-Classification \n* `svm` function from the `e1017` R package\n* Only Fares are use as predictor/feature"},{"metadata":{"_uuid":"7cfc6aa14fb6e81fa5bc0f8571b606bff34e95bd","_execution_state":"idle","trusted":true},"cell_type":"code","source":"options(echo=FALSE)\nlibrary(e1071)\nlibrary(caret)\nlibrary(tidyverse) \nlist.files(path = \"../input\")","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"d5c75c408a1f3ce3433968c8a295ba814f799250"},"cell_type":"code","source":"df <- read.csv('../input/train.csv')","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"ab7f2fb906cfcfb397ed5f9294f97443d1334f46"},"cell_type":"markdown","source":"## Quick Data Check"},{"metadata":{"trusted":true,"_uuid":"a5a8c52e38d2fe2fa19865898316db029af5217c","scrolled":true},"cell_type":"code","source":"#head(df)\nstr(df)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"996cec2289db106221956cec071ae0e53bb17840"},"cell_type":"markdown","source":"## Data Prep"},{"metadata":{"trusted":true,"_uuid":"0f974e5974da2987f4b324cd9d67c8c6022e3b3a"},"cell_type":"code","source":"print('No Feature Engineering :(')","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"55560b209ba852e57beef614b6fc462c8c7bbca0"},"cell_type":"markdown","source":"## Data Splitting\nTwo-Way data split 50:50"},{"metadata":{"trusted":true,"_uuid":"818101ba94f38fd2775354373816d73eb037c8d7"},"cell_type":"code","source":"set.seed(42)\nidx_train <- createDataPartition(df$PassengerId, p=0.5, list=FALSE, times=1)\n#idx_train\n#nrow(idx_train)\ndf_train <- df[idx_train,]\ndf_valid <- df[-idx_train,]\n#head(df_train)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"5dcc809340cc5f67be99044616265d91904c0040"},"cell_type":"markdown","source":"## Shoot First, Ask Later\n* y: uni/binary => Survived\n* x: uni/ratio => Fare"},{"metadata":{"trusted":true,"_uuid":"199c4b26316614f7dca0af659f67b014d4084cbe"},"cell_type":"code","source":"model <- svm(x = df_train$Fare, \n             y = as.factor(df_train$Survived), \n             scale = FALSE,\n             na.action = na.omit,\n             type = \"C-classification\",\n             kernel =\"radial\", \n             gamma = 2,\n             cost=10)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"7f041b0937d1865313d4a95962745a4adf843062"},"cell_type":"code","source":"summary(model)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"c926d56a322b60bd2369f85fd09c271fc4049b90"},"cell_type":"code","source":"yhat <- predict(model, df_valid$Fare)\n#length(yhat)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"155d5a12ec842c0056ed473077fef05a6cf7c78b","scrolled":false},"cell_type":"code","source":"res <- confusionMatrix(as.factor(yhat), as.factor(df_valid$Survived))\nacc <- unname(res$overall[1])\nres","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"3b7e71583bfed4d03ae98d0f4cc33f454d1e3d19"},"cell_type":"markdown","source":"## Submit"},{"metadata":{"trusted":true,"_uuid":"9d196620858252bc399e3f8e09e2471b53c858e2"},"cell_type":"code","source":"df_test <- read.csv('../input/test.csv')\n#nrow(df_test)\ndf_test$Fare[ is.na(df_test$Fare) ] <- 0\n#df_test$Fare","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"95bfa651a04b8d5034456182dfd9a6e1c236d260"},"cell_type":"code","source":"yhat <- predict(model, df_test$Fare)\n#length(yhat)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"4fb19ac3279e36e82c69219946c16d32048e722a"},"cell_type":"code","source":"res <- df_test %>% select(PassengerId) %>% mutate(Survived = yhat)\nhead(res)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"984a14d931911b5712b5c0f500a4b44ccfce73b2"},"cell_type":"code","source":"write.csv(res, file = 'my_submission.csv', row.names = F)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"b0651492a50b39c64d894ea5e785f5e07f5c785d"},"cell_type":"markdown","source":"## Links\n* https://www.rdocumentation.org/packages/caret/versions/6.0-80/topics/createDataPartition\n* https://www.rdocumentation.org/packages/e1071/versions/1.7-0/topics/svm\n* https://www.rdocumentation.org/packages/caret/versions/3.45/topics/confusionMatrix\n* https://www.kaggle.com/mrisdal/exploring-survival-on-the-titanic\n"}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}