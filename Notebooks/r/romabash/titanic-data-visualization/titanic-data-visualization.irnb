{"cells":[{"metadata":{"_uuid":"947b2f62b5380cee4a9c06aee690aa2a8d155b18"},"cell_type":"markdown","source":"# Titanic Data Visualization\nThis kernel will look at the Titanic Data to analyze the Survival rates based on different factors.  The provided Training Data Set will be used to process and visualize the data."},{"metadata":{"_uuid":"411ca412d8b6ee6c010b9e58cf0ac7dbe777463b"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"59047809f6d0e4fa3dfae83a3d860b6bfcbad0b4"},"cell_type":"markdown","source":"## Load packages and Data\n- **readr** will be used to read in the Data using the *read_csv* function\n- **dplyr** will be used for most of the data processing and manipulation\n- **ggplot2** will be used for data visualization"},{"metadata":{"trusted":true,"_uuid":"ab7ee4e6545001b1f97612417bf019376cc255cd"},"cell_type":"code","source":"library(readr) # Reading in data\nlibrary(dplyr) # Data manipulation\nlibrary(tibble) # Data manipulation\nlibrary(ggplot2) # Data visualization\nlibrary(ggthemes) # Data visualization\nlibrary(RColorBrewer) # Data visualization","execution_count":2,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"ce669be9cd837b24d1cef1c2b3512902eb1b9636"},"cell_type":"code","source":"titanic <- read_csv(\"../input/train.csv\")\nhead(titanic)","execution_count":3,"outputs":[]},{"metadata":{"_uuid":"26037fc46ec40950f859da11cc0ecbb6e67a4d8f"},"cell_type":"markdown","source":"## Convert Variable into Factors\n- Convert **Pclass**, **Survived** and **Sex** Variables into Factors using the *mutate* function\n- Keep **Age** numeric"},{"metadata":{"trusted":true,"_uuid":"5f6a7587339231b71d48a2a43b930bf31704e302"},"cell_type":"code","source":"titanic <- titanic %>%\n  mutate(Pclass = factor(Pclass), \n         Survived = factor(Survived), \n         Sex = factor(Sex)) ","execution_count":4,"outputs":[]},{"metadata":{"_uuid":"f42a53703c469697e39009c23c1ec9d1d8a0e789"},"cell_type":"markdown","source":"**Age** has some missing values (NA).  Missing values will be ignored for now"},{"metadata":{"_uuid":"e23f124c97ab12ba224d29e7f6d38818968d140f"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"df5c66bd7657b12d1da7f0c0efed5d3a2ceb5520"},"cell_type":"markdown","source":"# 1. Look at the Total Survival Rate \n- Use *table* function to look at the Survival rates\n- Convert table to a **tibble** (similar to dataframe) to use later when plotting with ggplot2 to add text to the graph\n- Use *rename* function to rename default Column names"},{"metadata":{"trusted":true,"_uuid":"bfd58280ca1e79bd3e66cdeb7607b3a9edb85296"},"cell_type":"code","source":"survival <- table(titanic$Survived) %>%\n  as_tibble() %>%\n  rename(Survived = Var1, Count = n)\n\nsurvival","execution_count":5,"outputs":[]},{"metadata":{"_uuid":"669f22707bee19eb89892c278d119499feaaec66"},"cell_type":"markdown","source":"## Look at the Total Survival Rate Proportion\n- Use *prop.table* to get the proportion"},{"metadata":{"trusted":true,"_uuid":"b3b9dcfb29d647ba363b58179914885532a0f391"},"cell_type":"code","source":"survival_ratio <- prop.table(table(titanic$Survived)) %>%\n  as_tibble() %>%\n  rename(Survived = Var1, Percentage = n) %>%\n  mutate(Percentage = round(Percentage, 2)*100)\n\nsurvival_ratio","execution_count":6,"outputs":[]},{"metadata":{"_uuid":"5dd4ec49060ff51e245eac6254ccc7dda97e6d07"},"cell_type":"markdown","source":"## Plot the Total Survival Rate \n- Using a barplot with *theme_few* theme from the **ggthemes** package\n- Add some styling to the plot: Center the Title and color, Edit the Legends \n- Use tibble of survival data in *geom_text* to add the Count to the plot\n- Use tibble of survival data ratio in *geom_label* to add the Percentages to the bars"},{"metadata":{"trusted":true,"_uuid":"df02881979d1043364ef4e6c5b3632f933fc1f30"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_bar(aes(x = Survived, fill = Survived)) +\n  geom_text(data = survival, \n            aes(x = Survived, y = Count, label = Count), \n            position = position_dodge(width=0.9), \n            vjust=-0.25,\n            fontface = \"bold\") +\n  geom_label(data = survival_ratio, \n             aes(x = Survived, y = Percentage, label = paste0(Percentage, \"%\"), group = Survived), \n             position = position_stack(vjust = 5)) +\n  theme_few() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Total Survival Rate\") +\n  scale_x_discrete(name= \"Survival Rate\", labels = c(\"Did Not Survive\", \"Survived\")) +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))","execution_count":7,"outputs":[]},{"metadata":{"_uuid":"3f6110d98eb1c2888741b04802230dc9d09fa193"},"cell_type":"markdown","source":"- Only 38% of people survived (342 out of total of 891)"},{"metadata":{"_uuid":"b8ce1431b668b4bc15de7efd71a7f7e41ed37b78"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"9f312fe96dd31735d6a45c791d1e65ba1cc7b4a1"},"cell_type":"markdown","source":"# 2. Look at Survival Rate by Gender\n- Group the data by **Sex** using the *group_by* function \n- Get the total Count of passengers in each gender group with *summarise* function"},{"metadata":{"trusted":true,"_uuid":"2e40a65c27f2406623e87eeb9c80fdcff931fe59"},"cell_type":"code","source":"gender <- titanic %>%\n  group_by(Sex) %>%\n  summarise(Count = n())\n\ngender","execution_count":8,"outputs":[]},{"metadata":{"_uuid":"11e0d23495747fecb4c106858c2ca4d563d93156"},"cell_type":"markdown","source":"## Look at the Gender Survival Rate Proportion\n- Group by **Sex** and **Survived** to get the Count of survived by gender using *summarise* function\n- Use *mutate* to add a new Percentage variable"},{"metadata":{"trusted":true,"_uuid":"f3217923c8b45b6606672e6ba0b22e41030feba3"},"cell_type":"code","source":"gender_ratio <- titanic %>%\n  group_by(Sex, Survived) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))\n\ngender_ratio","execution_count":9,"outputs":[]},{"metadata":{"_uuid":"5a5911ac1c69c7bdc4d15788939fb867d446abf0"},"cell_type":"markdown","source":"## Plot the Gender Survival Rate\n- Using a barplot\n- Represent Gender on the x-axis\n- Use Color to represent Survival on the Plot\n- Add the Count and Percentage using *geom_text* and *geom_label* respectively"},{"metadata":{"trusted":true,"_uuid":"6db6feb638270eb54b16a457d8f36af460a96800"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_bar(aes(x = Sex, fill = Survived)) +\n  geom_text(data = gender, \n            aes(x = Sex, y = Count, label = Count), \n            position = position_dodge(width=0.9), \n            vjust=-0.25, \n            fontface = \"bold\") +\n  geom_label(data = gender_ratio, \n             aes(x = Sex, y = Count, label = paste0(Percentage, \"%\"), group = Survived), \n             position = position_stack(vjust = 0.5)) +\n  theme_few() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Gender Survival Rate\") +\n  scale_x_discrete(name= \"Gender\") +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":10,"outputs":[]},{"metadata":{"_uuid":"e2aad6c4fd7689d0371580b7ed8144bbc6572d2d"},"cell_type":"markdown","source":"- Out of total of 314 Females, 74% Survived and 26% Did Not Survive\n- Out of total 577 Males, only 19% Survived and 81% Did Not Survive"},{"metadata":{"_uuid":"9d80d8bb79c5324c0d1528515c9ac5e629455cb6"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"1fa0fe4a97bf7c88f2d9cc7e1329d90e87c54165"},"cell_type":"markdown","source":"# 3. Look at Survival Rate by Ticket Class\n- Group the data by **Pclass** using the *group_by* function\n- Get the total Count of passengers in each **Pclass** with *summarise* function "},{"metadata":{"trusted":true,"_uuid":"2131e584b8e22add11d858683c9dac7c87ba5af7"},"cell_type":"code","source":"pclass <- titanic %>%\n  group_by(Pclass) %>%\n  summarise(Count = n())\n\npclass","execution_count":11,"outputs":[]},{"metadata":{"_uuid":"c25a84eee5f9c591879ba64cca82e055dec072da"},"cell_type":"markdown","source":"## Look at the Pclass Survival Rate Proportion\n- Group by **Pclass** and **Survived** to get the Count of survived in each **Pclass** using *summarise* function\n- Use *mutate* to add a new Percentage variable"},{"metadata":{"trusted":true,"_uuid":"6853e5a408e0b0075b7accf60c2eb26b6f21b8a7"},"cell_type":"code","source":"pclass_ratio <- titanic %>%\n  group_by(Pclass, Survived) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))\n\npclass_ratio","execution_count":12,"outputs":[]},{"metadata":{"_uuid":"2d00353c7bc535e64176e9bee603b3a0e6db5990"},"cell_type":"markdown","source":"## Plot the Gender Survival Rate\n- Using a barplot using black and white theme *theme_bw* from **ggplot2**\n- Represent Pclass on the x-axis\n- Use Color to represent Survival on the Plot\n- Add the Count and Percentage using geom_text and geom_label respectively"},{"metadata":{"trusted":true,"_uuid":"43e971d7699bdbccfe9192219d01dc89d8b58812"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_bar(aes(x = Pclass, fill = Survived)) +\n  geom_text(data = pclass, \n            aes(x = Pclass, y = Count, label = Count), \n            position = position_dodge(width=0.9), \n            vjust=-0.25, \n            fontface = \"bold\") +\n  geom_label(data = pclass_ratio, \n             aes(x = Pclass, y = Count, label = paste0(Percentage, \"%\"), group = Survived), \n             position = position_stack(vjust = 0.5)) +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Pclass Survival Rate\") +\n  scale_x_discrete(name= \"Pclass\") +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":13,"outputs":[]},{"metadata":{"_uuid":"9f95a272173ef52169c0668dec8ff0413c2c6f04"},"cell_type":"markdown","source":"- 1st Class: 216 Passengers\n  - 63% Survived\n  - 37%  Did Not Survive\n- 2nd Class: 184 Passengers\n  - 47% Survived\n  - 53%  Did Not Survive\n- 3rd Class: 491 Passengers\n  - 24% Survived\n  - 76%  Did Not Survive"},{"metadata":{"_uuid":"4d907451c0b33aacd49c7c82b88b65dea6ffb6df"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"72aa9b8bc99981c5410d9c3fb7f9b2f3779104af"},"cell_type":"markdown","source":"# 4. Look at Gender Proportion in each Class\n- Before looking at the proportion of Males and Females that Survived in each **Pclass**, let's look at the Gender proportion in each class"},{"metadata":{"trusted":true,"_uuid":"f6085ee787c10aef2126dcecc8d34633e42841be"},"cell_type":"code","source":"pclass_gender <- titanic %>%\n  group_by(Pclass) %>%\n  summarise(Count = n())\n\npclass_gender","execution_count":14,"outputs":[]},{"metadata":{"_uuid":"c920010219f58f2c4f1b140beb7001e07d8e4312"},"cell_type":"markdown","source":"## Look at the Pclass Gender Proportion"},{"metadata":{"trusted":true,"_uuid":"479be1646801c538ffe0f2214d7f247b1593904c"},"cell_type":"code","source":"pclass_gender_ratio <- titanic %>%\n  group_by(Pclass, Sex) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))\n\npclass_gender_ratio","execution_count":15,"outputs":[]},{"metadata":{"_uuid":"eb9fc4fa294141e8e9879a464c103e02fe89d523"},"cell_type":"markdown","source":"## Plot the Pclass Gender Proportion\n- Represent Pclass on the x-axis\n- Use Color to represent Gender on the Plot using the **RColorBrewer** package\n- Add the Count and Percentage using geom_text and geom_label respectively"},{"metadata":{"trusted":true,"_uuid":"bd89331f430f2bbd333801ab785096355657d71f"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_bar(aes(x = Pclass, fill = Sex)) +\n  geom_text(data = pclass_gender, \n            aes(x = Pclass, y = Count, label = Count), \n            position = position_dodge(width=0.9), \n            vjust=-0.25, \n            fontface = \"bold\") +\n  geom_label(data = pclass_gender_ratio, \n             aes(x = Pclass, y = Count, label = paste0(Percentage, \"%\"), group = Sex), \n             position = position_stack(vjust = 0.5)) +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Gender Proportion by Ticket Class\") +\n  scale_x_discrete(name= \"Pclass\") +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_brewer(name = \"Gender\", labels = c(\"Female\", \"Male\"), palette = \"Paired\")","execution_count":16,"outputs":[]},{"metadata":{"_uuid":"42e14c76d297268d643b6cb5669c0d487b82ad91"},"cell_type":"markdown","source":"- 1st Class: 216 total Passengers\n  - Females: 44%\n  - Males: 56%\n- 2nd Class: 184 total Passengers\n  - Females: 41%\n  - Males: 59%\n- 3rd Class: 491 total Passengers\n  - Females: 29%\n  - Males: 71%\n- Higher ratio of Male to Female in 3rd Class compared to 1st and 2nd Class"},{"metadata":{"_uuid":"fda70a0acd5a368d27c7f28ef55bcf632d1ec758"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"9b94f084822c0f05f4f8ba39147c46d13e74cfef"},"cell_type":"markdown","source":"# 5. Look at Survival Rate by Gender in each Pclass\n- First look at Pclass Gender Proportion\n- Second look at Survival Rate by Gender in each Pclass"},{"metadata":{"trusted":true,"_uuid":"2aecab054336a0b90fac893346d97ba37bf9df2d"},"cell_type":"code","source":"pclass_gender_ratio <- titanic %>%\n  group_by(Pclass, Sex) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))\n\npclass_gender_ratio","execution_count":17,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"cfe985b3f19addddab8b5e80e4deafb6a67dc4da"},"cell_type":"code","source":"pclass_gender_survived_ratio <- titanic %>%\n  group_by(Pclass, Sex, Survived) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))\n\npclass_gender_survived_ratio","execution_count":18,"outputs":[]},{"metadata":{"_uuid":"9eb2132d82b1a16052d44435a4acf028c46304ef"},"cell_type":"markdown","source":"## Plot the Gender Survival Proportion by Pclass\n- Represent Sex on the x-axis\n- Use Color to represent Survival\n- Use faceting to separate by **Pclass** using *facet_wrap*\n- Add the Count and Percentage using geom_text and geom_label respectively"},{"metadata":{"trusted":true,"_uuid":"f71ccf7c92b67958b620d9c936cf5ad4493f773b"},"cell_type":"code","source":"# Using facet_wrap(~ Pclass)\ntitanic %>%\n  ggplot() +\n  geom_bar(aes(x = Sex, fill = Survived)) +\n  facet_wrap(~ Pclass) +\n  geom_text(data = pclass_gender_ratio, \n            aes(x = Sex, y = Count, label = Count), \n            position = position_dodge(width=0.9), \n            vjust= -1.5, \n            fontface = \"bold\") +\n  geom_label(data = pclass_gender_survived_ratio, \n             aes(x = Sex, y = Count, label = paste0(Percentage, \"%\"), group = Survived), \n             position = position_stack(vjust = 0.5)) +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Gender Survival Rate by Pclass\") +\n  scale_x_discrete(name= \"Gender by Pclass \") +\n  scale_y_continuous(name = \"Passenger Count\", limits = c(0,360)) +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":19,"outputs":[]},{"metadata":{"_uuid":"b60bd0009bbf887e6a8af1534ffcc7489fb6d566"},"cell_type":"markdown","source":"### Plot using *facet_grid* to separate Gender and Pclass"},{"metadata":{"trusted":true,"_uuid":"304dc278e083213ea4c48db0fa06f564383c27ae"},"cell_type":"code","source":"# Using facet_grid(Sex ~ Pclass) to separate Gender and Pclass\ntitanic %>%\n  ggplot() +\n  geom_bar(aes(x = Survived, fill = Survived)) +\n  facet_grid(Sex ~ Pclass) +\n  geom_text(data = pclass_gender_survived_ratio, \n            aes(x = Survived, y = Count, label = paste0(Percentage, \"%\")), \n            position = position_dodge(width=0.9), \n            vjust= -0.5, \n            fontface = \"bold\") +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Gender Survival Rate by Pclass\") +\n  scale_x_discrete(name= \"Survival Rate\", labels = c(\"No\", \"Yes\")) +\n  scale_y_continuous(name = \"Passenger Count\", limits = c(0,360)) +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":20,"outputs":[]},{"metadata":{"_uuid":"b7cb199536bd352541caef5e400e3a279939456d"},"cell_type":"markdown","source":"- 1st Class:\n  - Females: \n    - 97% Survived\n    - 3% Did Not Survive\n  - Males:\n    - 37% Survived\n    - 63% Did Not Survive\n- 2nd Class:\n  - Females:\n    - 92% Survived\n    - 8% Did Not Survive\n  - Males:\n    - 16% Survived\n    - 84% Did Not Survive\n- 3rd Class:\n  - Females:\n    - 50% Survived\n    - 50% Did Not Survive\n  - Males:\n    - 14% Survived\n    - 86% Did Not Survive"},{"metadata":{"_uuid":"3b613c7c9ede42fa923431822e05360ac76cc31e"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"7b03fd2a927729abb85f7fdc671daead0b15bee2"},"cell_type":"markdown","source":"# 6. Look at Survival Rate by Age\n- First look at the **Age** distribution \n- Second look at Survival rate by **Age**"},{"metadata":{"_uuid":"2499bfb2b9743e3b9b0c5afbdeffe61d19fa6964"},"cell_type":"markdown","source":"## Find the Average Age of Passengers"},{"metadata":{"trusted":true,"_uuid":"145349bc882ce3d506c56cb3f41e3de18a926c0f"},"cell_type":"code","source":"# Remove Missing Values (177 NA Values)\nmedian(titanic$Age, na.rm = TRUE)","execution_count":21,"outputs":[]},{"metadata":{"_uuid":"0d448f7e0cb18ccb0159c1a5d2cd664b19831912"},"cell_type":"markdown","source":"- Average Age of Passengers is around 28"},{"metadata":{"_uuid":"6f6d19f7634442911529cb50036aabf777356e99"},"cell_type":"markdown","source":"## Plot the Age Distribution\n- Using a Histogram (Continious Data)\n- Using binwidth = 5 years\n- Ignoring 177 observations with missing Age"},{"metadata":{"trusted":true,"_uuid":"f96562308b6e5265016019b2eee985ae17c68fb4"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_histogram(aes(x = Age), binwidth = 5, color = \"#355a63\", fill = \"#96e4f7\") +\n  theme_few() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Age Distribution\") +\n  scale_x_continuous(name= \"Passenger Age\", breaks = 5*c(0:18)) +\n  scale_y_continuous(name = \"Passenger Count\")","execution_count":22,"outputs":[]},{"metadata":{"_uuid":"023b7129a0c77e5fcfdf0b5ac1c0a7c4833d9ad7"},"cell_type":"markdown","source":"## Plot the Survival Rate by Age\n- Use automatic fill based on Survived\n- Ignoring 177 observations with missing Age"},{"metadata":{"trusted":true,"_uuid":"ddc8be470c310aa4181314f163c0bd454260ba65"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_histogram(aes(x = Age, fill = Survived), binwidth = 5, color = \"#355a63\") +\n  theme_few() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Survival Rate by Age\") +\n  scale_x_continuous(name= \"Passenger Age\", breaks = 5*c(0:18)) +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":23,"outputs":[]},{"metadata":{"_uuid":"031ad67403f2528a9f69c08d94d41fcc92760652"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"bf8b12d20bdc3714eafabede434c954f6addb861"},"cell_type":"markdown","source":"# 7. Look at Survival Rates by Age when segmented by Gender and Class"},{"metadata":{"_uuid":"20aee69eef755e93a9bd954b171539178158ea26"},"cell_type":"markdown","source":"### Look At Survival Rate based on Gender and Class Segmented by Age\n- Females that Did NOT Survive in 1st and 2nd Class (3% and 8%) seem to be randomly distributed by Age"},{"metadata":{"trusted":true,"_uuid":"43e01f539e74dadeed94b4069831991232eb7db6"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_histogram(aes(x = Age, fill = Survived), binwidth = 5, color = \"#355a63\") +\n  facet_grid(Sex ~ Pclass) +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Survival Rate by Age, Gender and Class\") +\n  scale_x_continuous(name= \"Passenger Age\", breaks = 10*c(0:8)) +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":24,"outputs":[]},{"metadata":{"_uuid":"d0a49c97ac174ce601c383a93f0d4af8ab2bbe36"},"cell_type":"markdown","source":"- 1st Class:\n  - Females:\n    - Most Females in 1st Class Survived: 97% from previous data\n  - Males:\n    - Most Males up to Age 15 Survived\n- 2nd Class:\n  - Females:\n    - Most Females in 2nd Class Survived: 92% from previous data\n  - Males:\n    - Males up to Age of 10 Survived\n    - Majority of Males Age 15 and above Did NOT Survive\n    - Almost all Males Age 45 and above Did NOT Survive\n- 3rd Class:\n  - Females;\n    - 50% of Females Survived (based on previous data)\n    - Can't tell much more looking at Age\n  - Males:\n    - 86% Did Not Survive (based on previous data)\n    - Most Males 35 and above Did NOT Survive"},{"metadata":{"_uuid":"2045cab827111835d55c0f21631d5d8c1c4ff7a4"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"d401facd3380e5eb3bd2df5382d74a8e8d0c240a"},"cell_type":"markdown","source":"# 8. Look at Survival Based on Family Size"},{"metadata":{"_uuid":"1d39033c69b27be9deee284c77d0d68ac299880c"},"cell_type":"markdown","source":"## Add a Varibale for Family Size\n- Combine **SibSp** and **Parch** variables together and add 1 (for self) \n- Use the *mutate* function to add **FamilySize** to the dataset"},{"metadata":{"trusted":true,"_uuid":"0ea2de7d8922cadd6747144f11cc9b2eb307d8c7"},"cell_type":"code","source":"titanic <- titanic %>%\n  mutate(FamilySize = 1 + SibSp + Parch) ","execution_count":25,"outputs":[]},{"metadata":{"_uuid":"024e47c4d9f24b9c7ff43a30f2094601d42302c6"},"cell_type":"markdown","source":"## Look at Survival Rate Based on Family Size"},{"metadata":{"trusted":true,"_uuid":"6c446b8c5bef08225e974c0195d5306d6223dfd4"},"cell_type":"code","source":"titanic %>%\n  group_by(FamilySize, Survived) %>%\n  summarise(Count = n()) %>%\n  mutate(Percentage = round(Count/sum(Count)*100))","execution_count":26,"outputs":[]},{"metadata":{"_uuid":"2f30fe6c049aab3783838bece8a35b4d49b21df8"},"cell_type":"markdown","source":"## Plot Survival Rate Based on Family Size"},{"metadata":{"trusted":true,"_uuid":"5eea0e1bca04a5b43f0cdaa459fec1ce3b11e92f"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_histogram(aes(x = FamilySize, fill = Survived), binwidth = 1) +\n  facet_grid(Sex ~ Pclass) +\n  theme_bw() +\n  theme(plot.title = element_text(hjust = 0.5, size=18, color = \"#054354\")) +\n  ggtitle(\"Titanic Survival Rate by Family Size\") +\n  scale_x_continuous(name = \"Family Size\") +\n  scale_y_continuous(name = \"Passenger Count\") +\n  scale_fill_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":27,"outputs":[]},{"metadata":{"_uuid":"87b13e3f1ede854cf288cfa322754594257e734f"},"cell_type":"markdown","source":"- Majority of Males amd Females in 3rd Pclass with Family Size of 5 and above  Did NOT Survive"},{"metadata":{"_uuid":"29635fb4ae6a34cbbfde93f30d3e901b9fc89776"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"30fc0459a77917d5c9df5b87d8073958813cf15b"},"cell_type":"markdown","source":"# 9. Looking At Survival by Gender, Class, Age and FamilySize"},{"metadata":{"_uuid":"3c7978006f101fdc0763d0f8135401c22cb0c77a"},"cell_type":"markdown","source":"- Segment by **Pclass** and **Sex**\n- Represent **Age** on the x-axis (grouped by 10 years) and **FamilySize** on the y-axis\n- Represent **Survival** with color"},{"metadata":{"trusted":true,"_uuid":"c87e73bc2209f1998fb5927d7174d7ff0453eca5"},"cell_type":"code","source":"titanic %>%\n  ggplot() +\n  geom_point(aes(x = Age, y = FamilySize, color = Survived), alpha = 0.7) +\n  facet_grid(Sex ~ Pclass) +\n  theme_bw() +\n  theme(plot.title = element_text(size=18, color = \"#054354\")) +\n  ggtitle(\"Survival Rate by Gender, Class, Age, and Family Size\") +\n  scale_x_continuous(name= \"Passenger Age\", breaks = 10*c(0:8)) +\n  scale_y_continuous(name = \"Family Size\") +\n  scale_color_discrete(name = \"Outcome\", labels = c(\"Did Not Survive\", \"Survived\"))  ","execution_count":28,"outputs":[]},{"metadata":{"_uuid":"32a9dabbe064c3ddb4a60040461edc39ac193ba2"},"cell_type":"markdown","source":"- Younger Passengers from Smaller Families in Class 3 Survived\n- Passengers from Bigger Families in Class 3 Did Not Survive"},{"metadata":{"_uuid":"f22af7a03cff093e324eb8f4a493292bb228ce36"},"cell_type":"markdown","source":"<hr>"},{"metadata":{"_uuid":"2ca75ac4f8230e251d4af0c5d8750b02eaf4cf1d"},"cell_type":"markdown","source":"# Conclusion\n\n#### Gender: \n- Only 38% of people Survived (342 out of total of 891)\n- 74% of Females Survived compared to only 19% of Males that Survived\n\n#### Pclass:\n- 63% of Pclass 1 Survived\n- 47% of Pclass 2 Survived\n- 24% of Pclass 3 Survived\n  \n#### Gender and Pclass:  \n- Higher ratio of Male to Female in 3rd Pclass compared to 1st and 2nd Pclass\n- 97% and 92% of Females Survived in Pclass 1 and Pclass 2 respectively compared to only 50% in Pclass 3\n- 37% of Males in Pclass 1 Survived compared to only 16% and 14% in Pclass 2 and Pclass 3 respectively\n    \n#### Gender, Pclass and Age:\n- Most Females in 1st Pclass Survived while majority of Males over the Age of 15 Did Not Survive\n- Most Females in 2nd Pclass Survived while majority of Males over the Age of 10 Did Not Survive, and almost all Males Age 45 and above Did Not Survive\n- 50% of Females in Pclass 3 Survived (can't tell much more looking at Age).  86% of Males in Pclass 3 Did Not Survive, and most Males 35 and above Did Not Survive\n\n#### Gender, Pclass, Age, and Family Size:    \n- Majority of Males and Females in 3rd Pclass with Family Size of 5 and above Did Not Survive\n- Younger Passengers from smaller Families in Pclass 3 Survived"}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.1"}},"nbformat":4,"nbformat_minor":1}