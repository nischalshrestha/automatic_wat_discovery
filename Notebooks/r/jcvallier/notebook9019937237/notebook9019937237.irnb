{"cells":[{"metadata":{"_uuid":"f71d970bf10ae3a084276122c7a02f6ad68fe119","_cell_guid":"9d7d239f-f630-0ddf-a771-f9fe55c6a5fd","trusted":true},"cell_type":"code","source":"library(tidyverse)\nlibrary(stringr)\nlibrary(tidystats)\nlibrary(mlr)\nlibrary(glmnet)\nlibrary(randomForest)\nlibrary(lime)\nlibrary(janitor)\nlibrary(summarytools)\nset.seed(4321)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"4f89cffb21462297f905aaffbc67ae1f0457cd07","_cell_guid":"a43619a4-42a1-4220-b099-160486a25631","trusted":true},"cell_type":"code","source":"train_data <- read_csv('../input/train.csv')\ntest_data <- read_csv('../input/test.csv')\ntrain_data$set <- \"train\"\ntest_data$set <- \"test\"","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"afca0bd968838288a04f127ee50b0c405fd87afa","trusted":true},"cell_type":"code","source":"full <- full_join(train_data,test_data)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"98499190988b3934abd72b75dc03338b9c7e34a0"},"cell_type":"code","source":"glimpse(full)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"312f78b6fc39dcbf8aabf368eed2f126d9ab20c7"},"cell_type":"code","source":"summary(full, rm.na = F)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"85bafa3f9bd941abc5903d4b729ce295f8b0e89b"},"cell_type":"code","source":"full$Fare <- full$Fare %>% replace_na(14.45)\nfull$Age <- full$Age %>% replace_na(30)\nfull$Cabin <- full$Cabin %>% replace_na('blank')\nfull$Embarked <- full$Embarked %>% replace_na('S')\nfull$Embarked <- full$Embarked %>% as.factor()\nfull$Sex <- full$Sex %>% as.factor()\nfull$Pclass <- full$Pclass %>% as.factor()\nfull$Survived <- full$Survived %>% as.factor()\nfull <- full %>% separate(Name, sep = \",\", c('Last','First'))\nfull <- full %>% clean_names()\nfull <- full %>% select(-passengerid,-last,-first,-ticket,-cabin)\n\n","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"d31654089e53da87877f8b437f6709dbfee0eaa2"},"cell_type":"code","source":"train <- full %>% filter(set == \"train\")\ntest <- full %>% filter(set == \"test\")\ntrain <- train%>% select(-set)\ntest <- test%>% select(-set)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"91eef65f646f16f4cc9814d4bea42f273b728f02"},"cell_type":"code","source":"train.set <- train %>% sample_frac(.70)\ntest.set <- train %>% anti_join(train.set)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"14d5b58bbfc76088dcab4d77510c7586b9c8c672"},"cell_type":"code","source":"tsk <- makeClassifTask(data = train.set, target = 'survived')\n\nlrn <- makeLearner(cl= \"classif.glmnet\")\n\nmld <- train(lrn,tsk)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"7a6622f4ca93ea56cc3511ddb6071e1948ef70f9"},"cell_type":"code","source":"prd <- predict(mld, newdata = test.set)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"47f9d61a5fcade57c3937906de1ee8a7bfc0aaa0"},"cell_type":"code","source":"calculateConfusionMatrix(prd)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"b99cbef2a50599411c96be94cb45cbd81cb06ced"},"cell_type":"code","source":"performance(prd, list(acc,gmean))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"193c24001afafc59f6ffdd2131ef0e0b74de2162"},"cell_type":"code","source":"importance <- generateFilterValuesData(tsk, method = \"randomForest.importance\")","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"3cbaa0e25f0084517f1628fe5478da11aef3a6af"},"cell_type":"code","source":"plotFilterValues(importance)","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"1f9c099a9bde35687058dcc43e9e6d07d92edb00"},"cell_type":"code","source":"","execution_count":null,"outputs":[]}],"metadata":{"_is_fork":false,"_change_revision":0,"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}