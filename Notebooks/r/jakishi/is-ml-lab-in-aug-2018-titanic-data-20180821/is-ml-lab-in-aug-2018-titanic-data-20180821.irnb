{"cells":[{"metadata":{"_uuid":"18e0003f0c1a892e57abbe1a7479aa214c0f1751","_execution_state":"idle","trusted":true,"scrolled":true},"cell_type":"code","source":"## Importing packages\n\n# This R environment comes with all of CRAN and many other helpful packages preinstalled.\n# You can see which packages are installed by checking out the kaggle/rstats docker image: \n# https://github.com/kaggle/docker-rstats\n\nlibrary(tidyverse) # metapackage with lots of helpful functions\n\n## Running code\n\n# In a notebook, you can run a single code cell by clicking in the cell and then hitting \n# the blue arrow to the left, or by clicking in the cell and pressing Shift+Enter. In a script, \n# you can run code by highlighting the code you want to run and then clicking the blue arrow\n# at the bottom of this window.\n\n## Reading in files\n\n# You can access files from datasets you've added to this kernel in the \"../input/\" directory.\n# You can see the files added to this kernel by running the code below. \n\nlist.files(path = \"../input\")\n\n## Saving data\n\n# If you save any files or images, these will be put in the \"output\" directory. You \n# can see the output directory by committing and running your kernel (using the \n# Commit & Run button) and then checking out the compiled version of your kernel.","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"d6ae7287f8ad8a0306a72aadb8e65a109fb9e13d"},"cell_type":"markdown","source":"佐藤さんが作ってくれた「Titanicデータ確認_20180821.html」の内容をKaggleのKernelを使って再現しました。（それだけです。新しいことは何も追加していません）"},{"metadata":{"_uuid":"320f17b1c2e8434d7130bf5878b4b89d2ecc1779"},"cell_type":"markdown","source":"# set dataset filename as list"},{"metadata":{"trusted":true,"_uuid":"172741e4f5b583b3b7a6417cebfff0c71d8dc4e5"},"cell_type":"code","source":"if(T){\n  lstInputFileNmList <- list()\n  lstInputFileNmList[[\"train\"]] <- \"train.csv\"\n  lstInputFileNmList[[\"test\"]] <- \"test.csv\"\n  lstInputFileNmList[[\"submit\"]] <- \"gender_submission.csv\"\n}","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"bd2233f7f203d9835cfd2d5b75c352fa81a02565"},"cell_type":"markdown","source":"# csvデータ読込み (read.csv)"},{"metadata":{"trusted":true,"_uuid":"1ffa6fd4eab9c49ff546955cb4581d2b28a4dae3"},"cell_type":"code","source":"#Load data\ndatTrain <- read.csv('../input/train.csv', header=T, stringsAsFactors=F)\ntest <- read.csv('../input/test.csv', header=T, stringsAsFactors=F)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"9547cd336e4de9ef4b16625485cc3e4b4e737195"},"cell_type":"markdown","source":"# 対数変換"},{"metadata":{"trusted":true,"scrolled":true,"_uuid":"32a4d59c8d987145b670235117a33452249c29e8"},"cell_type":"code","source":"datTrain$Age_log <- log(1+abs(datTrain$Age))\ndatTrain$Fare_log <- log(1+abs(datTrain$Fare))","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"4169ea757a8f86d63116de1f50ff17d255f757e5"},"cell_type":"markdown","source":"# データの次元 (dim)"},{"metadata":{"trusted":true,"_uuid":"0f4b44507add14b120273fc14a63a72ce8b0929a"},"cell_type":"code","source":"dim(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"3cb71ab03705ac7eeb578c0cee6ce98190bb369b"},"cell_type":"markdown","source":"# データのレコード数 (nrow)"},{"metadata":{"trusted":true,"_uuid":"305ab421bd0dd268b900fc76c0fc623fbbd6a25d"},"cell_type":"code","source":"nrow(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"8cc1bccf4ef8c54f7061c7327ad6e961023ae1d0"},"cell_type":"markdown","source":"# データのカラム数 (ncol)"},{"metadata":{"trusted":true,"_uuid":"8c740308c184c2e889a5a635e6f55bae9fd29917"},"cell_type":"code","source":"ncol(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"03b09c89c8a6b48e3fe3d41e79a701c4dccc07bf"},"cell_type":"markdown","source":"# カラム名 (colnames)"},{"metadata":{"trusted":true,"_uuid":"aad02f738961886713076ea33e614916b6b440a1"},"cell_type":"code","source":"colnames(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"30eaabda640af8332efcb9ee4e48f1e5a6e6b4f9"},"cell_type":"markdown","source":"# カラム名・データ型 (str)"},{"metadata":{"trusted":true,"scrolled":true,"_uuid":"71f59b9c42ee2956791b90cb132d5b941874820a"},"cell_type":"code","source":"str(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"aff71e414d2a3926da628b445acf1019735eac0c"},"cell_type":"markdown","source":"# 先頭データ (head 6rows)"},{"metadata":{"trusted":true,"scrolled":false,"_uuid":"45c7592e00ce493826ddf435512afa341dfa298c"},"cell_type":"code","source":"#knitr::kable(head(datTrain), format=\"pandoc\", caption=\"\") # Original Satou san7s R code \nhead(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"7acbcb1c418eedfd98c662c746a002ea294dc4dd"},"cell_type":"markdown","source":"# 後尾データ (tail 6rows)"},{"metadata":{"trusted":true,"_uuid":"d0004c4cf0b64f9277c9245f10fbcbde81ff4397"},"cell_type":"code","source":"# knitr::kable(tail(datTrain), format=\"pandoc\", caption=\"\")\ntail(datTrain) ","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"949cc9328e74cc3b40465a90e806ff78b27413d2"},"cell_type":"markdown","source":"# サマリー"},{"metadata":{"trusted":true,"_uuid":"10b21cf5616a766b2edf8ba819a49b8b9331593f"},"cell_type":"code","source":"summary(datTrain)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"1cf33b9230faeb1b9c0fb242916aa01d5bebcdc2"},"cell_type":"markdown","source":"# quantile"},{"metadata":{"trusted":true,"_uuid":"0631a579b54323b43ca4ee404b4669385c971da1"},"cell_type":"code","source":"quantile(datTrain[,\"Age\"], na.rm=T, probs=seq(0,1,0.05))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"06fd0ef01c2ee6e26278aa20fecadd3465a06534"},"cell_type":"code","source":"quantile(datTrain[,\"Age\"], na.rm=T, probs=seq(0.95,1,0.005))","execution_count":null,"outputs":[]},{"metadata":{"trusted":true,"_uuid":"28c013ac83c8e875c7e7f8164d6a1a929009e38f"},"cell_type":"code","source":"# Set plot size into width: 10 and height: 7 (Default: 7)\noptions(repr.plot.width=10, repr.plot.height=8)\n\n## Reference\n## Rをノートブック形式で利用する\n## https://qiita.com/sbtseiji/items/876d2618702416892f7f\n# JupyterのR環境はreprというパッケージを使用しており，そのオプションを設定すればプロットのサイズを変更できるようです。初期値では縦横とも7のサイズになっているので，それぞれ4に変更します。","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"c9a6c4e2698577a781c80adf9a34be53f6411ff1"},"cell_type":"markdown","source":"# histogram (Age)"},{"metadata":{"trusted":true,"_uuid":"6dc241c17892b8066200e720587818ab69c2656c"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Age))\np <- p + geom_histogram(colour=\"black\", fill=\"white\")\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"d2e3c18cc2df77f95b53c522cf99d999555512cc"},"cell_type":"markdown","source":"# histogram (Age_log)"},{"metadata":{"trusted":true,"_uuid":"f342d7b6f03a4f83574db4ad4c9a56d0eb9f3f91"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Age_log))\np <- p + geom_histogram(colour=\"black\", fill=\"white\")\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"3c190d033e7392766e43ff6c76c8673aaedfac2e"},"cell_type":"markdown","source":"# histogram (Fare)"},{"metadata":{"trusted":true,"_uuid":"9d2405ebb03840a0891f458229c48a4031d0250d"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Fare))\np <- p + geom_histogram(colour=\"black\", fill=\"white\")\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"195d61f36d9a43a6b21a180937eb078b21e61578"},"cell_type":"markdown","source":"   # histogram (Fare_log)"},{"metadata":{"trusted":true,"_uuid":"02f8dd8242cc681c7c4a1b1303876290c095547e"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Fare_log))\np <- p + geom_histogram(colour=\"black\", fill=\"white\")\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"73786edc4de7d681af5260ff9d063c0958acaa53"},"cell_type":"markdown","source":"# boxplot (Age by Sex)"},{"metadata":{"trusted":true,"_uuid":"4acc6dce9f096cf089671215de66bc1f7e4f3c0e"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Sex, y=Age, group=Sex))\np <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)\np <- p + stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, fill=\"white\", show.legend=FALSE)\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"8dd50470313df6e08bc2a7e513cc0d7f420bc9cb"},"cell_type":"markdown","source":"# boxplot (Fare, by Pclass)"},{"metadata":{"trusted":true,"_uuid":"73e6b46b6573fc0ca995097c9920ce6c5c98f097"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Pclass, y=Fare_log, group=Pclass))\n#p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)\np <- p + geom_boxplot()\np <- p + stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, fill=\"white\", show.legend=FALSE)\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"abe7f34360efe03214e8e7a754addfeb01987b91"},"cell_type":"markdown","source":"# boxplot (Fare_log>2.0, by Pclass)"},{"metadata":{"trusted":true,"_uuid":"508f3b39e3d5c072b1463cdcd57d6a119536a853"},"cell_type":"code","source":"fillFlg_eff <- datTrain[,\"Fare_log\"]>2.0\ndatTrain_eff <- datTrain[fillFlg_eff,]\n\np <- ggplot(datTrain_eff, aes(x=Pclass, y=Fare_log, group=Pclass))\n#p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)\np <- p + geom_boxplot()\np <- p + stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, fill=\"white\", show.legend=FALSE)\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"9a07e4790c2491dfc0ed94d0a6b2661882b9936f"},"cell_type":"markdown","source":"# boxplot (Age by Survived)"},{"metadata":{"trusted":true,"_uuid":"d360fb0ce06476b02d1ce5b6011fba0fdd26c4dc"},"cell_type":"code","source":"p <- ggplot(datTrain, aes(x=Survived, y=Age, group=Survived))\n#p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)\np <- p + geom_boxplot()\np <- p + stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, fill=\"white\", show.legend=FALSE)\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"586b8861dde1a8f70bc83ad2bf52a43c33853a11"},"cell_type":"markdown","source":"# boxplot (Fare_log > 2.0 by Survived)"},{"metadata":{"trusted":true,"_uuid":"11c41c021abaef968ba07c49cdc53287a0a9a521"},"cell_type":"code","source":"fillFlg_eff <- datTrain[,\"Fare_log\"]>2.0\ndatTrain_eff <- datTrain[fillFlg_eff,]\n\np <- ggplot(datTrain_eff, aes(x=Survived, y=Fare_log, group=Survived))\n#p <- p + geom_boxplot(outlier.shape=NA, notch=F, coef=1.0)\np <- p + geom_boxplot()\np <- p + stat_summary(fun.y=mean, geom=\"point\", shape=20, size=3, fill=\"white\", show.legend=FALSE)\np <- p + theme(axis.text.x=element_text(size=14, face=\"bold\"),\n               axis.text.y=element_text(size=14, face=\"bold\"))\nplot(p)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"103bd163ef9a81d774930e9b9266a046cfb562bc"},"cell_type":"markdown","source":"# 相関 (correlation) : {“Age”,“Embarked”}"},{"metadata":{"trusted":true,"_uuid":"71c69e5a3b7a7eebbca49e104f57b7fbd7f5bcb7"},"cell_type":"code","source":"library(psych)\npsych::pairs.panels(datTrain[,c(\"Survived\",\"Age\",\"Embarked\")], pch = 16)","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"72b2925366c86c127ade1085d452e491b0188f9e"},"cell_type":"markdown","source":"# 相関 (correlation) : {“Pclass”,“Fare”,“Sex”}"},{"metadata":{"trusted":true,"_uuid":"3586c5920a8fffc8e8c4abc166df067a5a9b03f3"},"cell_type":"code","source":"library(psych)\npsych::pairs.panels(datTrain[,c(\"Survived\",\"Pclass\",\"Fare\",\"Sex\")])","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"25f151ed7b005fa1ef44b61fc93cd0bc4f615b66"},"cell_type":"markdown","source":"# 相関 (correlation) : {“SibSp”,“Parch”,“Cabin”}"},{"metadata":{"trusted":true,"_uuid":"51cde946b4d1a0d9a2b8eecbfda1cd7c186ef722"},"cell_type":"code","source":"library(psych)\npsych::pairs.panels(datTrain[,c(\"Survived\",\"SibSp\",\"Parch\",\"Cabin\")])","execution_count":null,"outputs":[]},{"metadata":{"_uuid":"9711fe15af49f434613193cc6e5fbbddac970fde"},"cell_type":"markdown","source":"# 相関 (correlation) : {“Pclass”,“Cabin”}"},{"metadata":{"trusted":true,"_uuid":"04869b857fb6318ab4410c40c231b9da221913a1"},"cell_type":"code","source":"library(psych)\npsych::pairs.panels(datTrain[,c(\"Survived\",\"Pclass\",\"Cabin\")])","execution_count":null,"outputs":[]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"3.4.2","file_extension":".r","codemirror_mode":"r"}},"nbformat":4,"nbformat_minor":1}