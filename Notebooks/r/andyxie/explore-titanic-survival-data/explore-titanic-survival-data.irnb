{"cells": [{"cell_type": "markdown", "source": ["## Introduction\n", "\n", "The purpose of this article is to practice R skill. Analysis herein is loosely based on various previous notebooks."], "metadata": {"_uuid": "66cd62026c7478927c35e4a5a24b14cb5a945085", "_cell_guid": "f3a12052-c6d9-4ea8-bb06-f3ff4b5755a3"}}, {"cell_type": "markdown", "source": ["## Prepare Data"], "metadata": {}}, {"source": ["# Libraries\n", "library(ggplot2, quietly=TRUE)\n", "library(readr, quietly=TRUE)\n", "library(psych, quietly=TRUE)\n", "library(dplyr, quietly=TRUE)\n", "library(ggmosaic, quietly=TRUE)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["data <- read_csv(\"../input/train.csv\")\n", "str(data)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["head(data)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["## Impact of Age\n", "Here we will explore the age factor to see if it is a good indicator of survival rate.\n", "\n", "The first step to all analysis is to clean data, the following would indiccate many NAs in age, so all observations without age should be removed for this purpose."], "metadata": {}}, {"source": ["# Clean data\n", "data.clean <- data[!is.na(data$Age),]\n", "\n", "ggplot(data.clean, aes(x=Age)) +\n", "  geom_histogram(binwidth = 2)\n", "\n", "describe(data.clean$Age)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["As we can easily tell from the above histogram, the age of passengers is largely a normal distribution, the number is significant lower around age 10 and higher around 0. The situation could be explained by the fact that newborns generally travels together with their parents but young children need to go to school and therfore cannot board titanic. The validity of this explaination however need further proof.\n", "\n", "Let us see if age impact a persons chance of survival:"], "metadata": {}}, {"source": ["# Devide age into age groups\n", "data.clean$Age.Group <- ifelse(data.clean$Age < 10, \"0 ~ 9\", \n", "                               ifelse(data.clean$Age < 20, \"10 ~ 19\",\n", "                                      ifelse(data.clean$Age < 30, \"20 ~ 29\",\n", "                                             ifelse(data.clean$Age < 40, \"30 ~ 39\",\n", "                                                    ifelse(data.clean$Age < 50, \"40 ~ 49\",\n", "                                                           ifelse(data.clean$Age < 0, \"50 ~ 59\", \"60+\"))))))\n", "\n", "table(data.clean$Age.Group, data.clean$Survived)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["mosaicplot(~ Age.Group + as.factor(Survived), data = data.clean, color = 6:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["When we look at this chart, we can tell people on the board certainly had helped young children to survived the crash, and the main body of people who sacrificed from this deed was the youn group aged 20-29. It is also worth noting that people aged 30-39 had the highest survival rate. We will need to test if these conclusions are significant statistically. We may assume that most crew members are 20 - 29, therefore the high casualty."], "metadata": {}}, {"cell_type": "markdown", "source": ["## Impact of Sex"], "metadata": {}}, {"source": ["ggplot(data.clean, aes(x=Age, color=Sex)) +\n", "  geom_freqpoly(binwidth = 2)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["Firstly, it is not difficult to tell that there are more male passengers than female ones, but such difference is not significant when people are less than 15 years old."], "metadata": {}}, {"source": ["mosaicplot(~ Sex + as.factor(Survived), data = data.clean, color = 6:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["Although the male population is higher in percentage, more female passengers survived, indicating that people are really gentelmen when faced with death. They acted to protect women and children. "], "metadata": {}}, {"cell_type": "markdown", "source": ["## Impact of Family Size"], "metadata": {}}, {"source": ["# Create family size\n", "data.clean$Family <- data.clean$SibSp + data.clean$Parch\n", "data.clean$Family.Size <- ifelse(data.clean$Family == 0, \"Single\",\n", "                               ifelse(data.clean$Family == 1, \"Small\", \"Large\"))"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["mosaicplot(~ Family.Size + as.factor(Survived), data = data.clean, color = 6:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["As indicated above, being single is not good for your chance of survival, but that could also be caused by the fact that most crew members are young single man."], "metadata": {}}, {"cell_type": "markdown", "source": ["## Impact of Fare"], "metadata": {}}, {"source": ["ggplot(data.clean, aes(x=Fare)) +\n", "  geom_histogram(binwidth=5)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["# cut_number is not giving satisfing results here.\n", "data.clean$Fare.Group <- cut_number(data.clean$Fare, 8)\n", "mosaicplot(~ Fare.Group + as.factor(Survived), data = data.clean, color = 6:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"cell_type": "markdown", "source": ["As indicated in the chart above, the world is not fair, people are not created equal. Paying more fare does improve your chance for survival. The high survival rate can be explained by the location and low passenger density in cabins for the rich.\n", "\n", "Some of our previous conclusions need to be changed, too. As indicated in the data, the occupants of cheap cabins are dominately poor male, it was them who had the lowest survival rate. Families also tend to pay more fare, or rather, only well-off people travel with family (for pleasure instead of work, maybe), therefore triwsting the survival rate."], "metadata": {}}, {"source": ["mosaicplot(~ Fare.Group + as.factor(Sex), data = data.clean, color = 6:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}, {"source": ["mosaicplot(~ Fare.Group + as.factor(Family.Size), data = data.clean, color=2:7, las = 1)"], "cell_type": "code", "metadata": {}, "execution_count": null, "outputs": []}], "nbformat": 4, "nbformat_minor": 1, "metadata": {"kernelspec": {"language": "R", "name": "ir", "display_name": "R"}}}